# Первый набор требований   

R1.1 Приложение должно аутентифицировать пользователя по логину и паролю (логин[a -z],{1-9})  

R1.2 Пароль должен храниться безопасно  

R1.3 Приложение должно авторизовывать пользователя к определенному ресурсу с определенной ролью(ресурс - слова из заглавных букв, разделенные точками)  

R1.4 Ресурсы должны храниться в виде дерева  

R1.5 Допустимые роли - WRITE., READ, EXECUTE  

R1.6 Доступ к ресурсу с определенной ролью автоматически предоставляет доступ ко всем его потомкам  

R1.7 Приложение должно иметь возможность учесть время доступа и потребляемый объем  

R1.8 Приложение это консольная утилита, принимающая на вход параметры:  
 пусто  
`-h вывод справки`  
`-login<str>  -pass<str> `  
`-login<str>  -pass<str> -<res> -<role>`   
`-login<str>  -pass<str>  -<res> -<role> -ds<YYYY-MM-DD> -de<YYYY-MM-DD> -vol<int>`  

R1.9 Приложение возвращает следующие коды: 0 - успех , 1 - справка, 2 - неверный формат логина, 3 - неизвестный логин, 4 - неверный пароль, 5 - неизвестная роль, 6 - нет доступа, 7 - некорректная активность(неверная дата или объем)  

R1.10 Приложение на вход принимает параметры в любом порядке  

R1.11 Приложение должно сначала аутентифицировать(коды 0,1,2,3,4), потом авторизовать(коды 0, 5, 6), потом аккаунтить(коды 0, 7)  

R1.12 Создайте скрипты bash/sh которые:   
* компилируют и собирают jar  
* выполняют программу  
* прогоняют тесты

# Второй набор требований 

R2.1 Создать файл `Roadmap2.md` и описать план работы над вторым набором требований  	

R2.2 Каждый проект должен содержать README.md с описанием проекта. Также должны быть ссылки на два роадмапа: 
по первому и второму набору требований.  	

R2.3 В README.md должна присутствовать инструкция по сборке проекта из консоли  	

R2.4 В README.md должна присутствовать инструкция по запуску собранного проекта из консоли  	

R2.5 В README.md должна присутствовать инструкция по тестированию собранного проекта  	

R2.6 В репозитории должен содержаться скрипт сборки проекта `BUILD.sh`	(Помните, что classpath на Windows разделяется через ; а на linux через :. Используйте `"$(expr substr $(uname -s) 1 10)" == "MINGW64_NT"` или `"$(expr substr $(uname -s) 1 10)" == "Linux"` http://stackoverflow.com/questions/394230/detect-the-os-from-a-bash-script )  

R2.7 В репозитории должен содержаться скрипт запуска проекта `RUN.sh`	(Научитесь запускать jar файл с указанием зависимостей)  

R2.8 В репозитории должен содержаться скрипт тестирования системы `TEST.sh`, покрывающий все варианты использования (которые вытекают из требований)	(Напишите скрипт выполняющий указанные тест-кейсы с выводом результатов отдельных тестов и итогового результата. Тестирование считается неуспешным если хоть один тест не прошел.)  

R2.9 Код должен быть отформатирован согласно требованиям kotlin coding conventions	  

R2.10 В репозитории должен содержаться файл `.gitignore` в котором будут отфильтрованы бинарные артефакты и файлы IDE  	

R2.11 Скрипт тестирования должен возвращать 0 если все тесты прошли и 1 если хоть один тест не прошел  	

R2.12 Приложение должно автоматически собираться и тестироваться на `travis-ci.org`	(При коммите с Windows, не забудьте пометить sh-файлы исполняемым флагом git update-index --chmod=+x *.sh)  

R2.13 Включите `github pages` в вашем репозитории и выберите какой-нибудь стиль, чтобы сайт сгенерился из вашего `README.md` файла  	

 ## Requirements #3
| Требование | Комментарий 
|:---|:---| 
| R3.1 Приложение должно логировать в stdout все введенные параметры, процесс принятия решения с пояснением причины, возникающие исключения со стректрейсом | Можно использовать [библиотеку](http://logging.apache.org/log4j/2.x/manual/configuration.html) Вывод вида "Пароль ABC для пользователя XYZ неверный" |
| R3.2 Приложение должно логировать в файл aaa.log в директории запуска все введенные параметры, процесс принятия решения с пояснением причины, возникающие исключения со стректрейсом |  |
| R3.3 Приложение должно хранить данные во встраиваемой СУБД | Вы можете выбрать любую встраиваемую СУБД, т.е. такую которая включается внутрь jar-файла, не требует установки и настройки [В качестве БД можно использовать это](http://www.h2database.com/html/main.html) |
| R3.4 Схема данных должна включать по крайней мере 3 таблицы, 3 внешних ключа, один уникальный ключ (логин), один индекс (пользователь, роль) |  |
| R3.5 При старте приложение должно файл с БД aaa.db (в зависимости от выбранной СУБД расширение может отличаться) в директории запуска и инициализировать схему если БД не найдена |  Для инициализации схемы используйте [flywaydb](http://flywaydb.org/getstarted/firststeps/api.html) |
| R3.6 При старте приложение должно заполнять тестовыми данными через миграцию, если БД не найдена в папке с приложением |  Данные должны заполняться в отдельной миграции |
| R3.7 Выборка данных о пользователе и ролях из базы должна исключать SQLI  | Используйте для выборки данных [PreparedStatement](http://docs.oracle.com/javase/tutorial/jdbc/basics/prepared.html) |
| R3.8 Вставка данных о доступе должна исключать SQLI |  |
| R3.9 Вся работа с данными из базы должна осуществляться через DAL и доменные объекты (Anemic Data Model) |  |
| R3.10 Архитектура приложения должна удовлетворять принципам SOLID | [Принципы SOLID](https://ru.wikipedia.org/wiki/SOLID_(объектно-ориентированное_программирование)) |
| R3.11 Доменные классы должны находиться в отдельном пакете| DAO-класс если более одного тоже должны находиться в отдельном пакете  |
| R3.12 Настройки БД (url, login, pass) должны передаваться через переменные окружения System.getenv() |  |
